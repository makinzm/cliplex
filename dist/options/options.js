(()=>{"use strict";var e={379:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,l){function a(e){try{r(o.next(e))}catch(e){l(e)}}function d(e){try{r(o.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}r((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalDatabase=void 0,t.LocalDatabase=class{constructor(){this.STORAGE_KEY="word_entries",this.EXCLUDED_DOMAIN_KEY="excluded_domains"}getAll(){return n(this,void 0,void 0,(function*(){console.log("Getting all entries from storage...");const e=yield chrome.storage.local.get(this.STORAGE_KEY);return console.log("All entries:",e),e[this.STORAGE_KEY]||[]}))}save(e){return n(this,void 0,void 0,(function*(){const t=yield this.getAll(),n=t.findIndex((t=>t.key===e.key));n>-1?t[n]=e:t.push(e),yield chrome.storage.local.set({[this.STORAGE_KEY]:t})}))}delete(e){return n(this,void 0,void 0,(function*(){const t=(yield this.getAll()).filter((t=>t.key!==e));yield chrome.storage.local.set({[this.STORAGE_KEY]:t})}))}getAllExcludedDomains(){return n(this,void 0,void 0,(function*(){return(yield chrome.storage.local.get(this.EXCLUDED_DOMAIN_KEY))[this.EXCLUDED_DOMAIN_KEY]||[]}))}addExcludedDomain(e){return n(this,void 0,void 0,(function*(){const t=yield this.getAllExcludedDomains();t.some((t=>t.domain===e))||(t.push({domain:e}),yield chrome.storage.local.set({[this.EXCLUDED_DOMAIN_KEY]:t}))}))}removeExcludedDomain(e){return n(this,void 0,void 0,(function*(){const t=(yield this.getAllExcludedDomains()).filter((t=>t.domain!==e));yield chrome.storage.local.set({[this.EXCLUDED_DOMAIN_KEY]:t})}))}}},115:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,l){function a(e){try{r(o.next(e))}catch(e){l(e)}}function d(e){try{r(o.throw(e))}catch(e){l(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}r((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=new(n(379).LocalDatabase),l=document.getElementById("dateFrom"),a=document.getElementById("dateTo"),d=document.getElementById("filterButton"),r=document.getElementById("prioritySort"),c=document.getElementById("wordsTableBody");let s=[];function u(){return o(this,arguments,void 0,(function*(e={}){let t=yield i.getAll();e.from&&(t=t.filter((t=>new Date(t.addedDate)>=e.from))),e.to&&(t=t.filter((t=>new Date(t.addedDate)<=e.to))),e.prioritySort?t.sort(((t,n)=>"asc"===e.prioritySort?t.priority===n.priority?new Date(t.addedDate).getTime()-new Date(n.addedDate).getTime():t.priority-n.priority:"desc"===e.prioritySort?t.priority===n.priority?new Date(n.addedDate).getTime()-new Date(t.addedDate).getTime():n.priority-t.priority:0)):t.sort(((e,t)=>e.priority===t.priority?new Date(t.addedDate).getTime()-new Date(e.addedDate).getTime():t.priority-e.priority)),s=t,v()}))}let m=1;const p=10,y=document.getElementById("pagination");function h(){y.innerHTML="";const e=Math.ceil(s.length/p),t=document.createElement("button");t.textContent="前へ",t.className="pagination-button",t.disabled=1===m,t.addEventListener("click",(()=>{m>1&&(m--,v(),h())})),y.appendChild(t);const n=document.createElement("button");n.textContent="次へ",n.className="pagination-button",n.disabled=m===e,n.addEventListener("click",(()=>{m<e&&(m++,v(),h())})),y.appendChild(n)}function v(){c.innerHTML="",Math.ceil(s.length/p);const e=(m-1)*p,t=e+p,n=s.slice(e,t);for(const e of n){const t=document.createElement("tr"),n=`https://youglish.com/pronounce/${encodeURIComponent(e.key)}/english`,l=`https://playphrase.me/#/search?q=${encodeURIComponent(e.key)}`,a=`https://www.oxfordlearnersdictionaries.com/definition/english/${encodeURIComponent(e.key)}`,d=`https://ejje.weblio.jp/content/${encodeURIComponent(e.key)}`,r=`https://www.yourdictionary.com/${encodeURIComponent(e.key)}`,s=`https://hypcol.marutank.net/?q=${encodeURIComponent(e.key)}&d=f`;t.innerHTML=`\n      <td class="key-cell">${e.key}</td>\n      <td class="link-cell">\n        <ul>\n          <li><a href="${a}" target="_blank">Ox.</a></li>\n          <li><a href="${d}" target="_blank">We.</a></li>\n        </ul>\n      </td>\n      <td class="link-cell">\n        <ul>\n          <li><a href="${n}" target="_blank">Youglish</a></li>\n          <li><a href="${l}" target="_blank">P.P.</a></li>\n        </ul>\n      </td>\n      <td class="link-cell">\n        <ul>\n          <li><a href="${r}" target="_blank">Y.D.</a></li>\n          <li><a href="${s}" target="_blank">H.D.</a></li>\n        </ul>\n      </td>\n      <td>\n        <ul>\n          ${e.examples.map(((e,t)=>`\n            <li>${e} <button class="delete-example" data-index="${t}">削除</button></li>\n          `)).join("")}\n        </ul>\n        <button class="add-example">追加</button>\n      </td>\n      <td>\n        <textarea class="note-area">${e.note}</textarea>\n      </td>\n      <td>${new Date(e.addedDate).toLocaleString()}</td>\n      <td>\n        <select class="priority-select">\n          ${[1,2,3,4,5].map((t=>`<option value="${t}" ${t===e.priority?"selected":""}>${t}</option>`)).join("")}\n        </select>\n      </td>\n      <td>\n        <button class="save-changes">保存</button>\n        <button class="delete-key">削除</button>\n      </td>\n    `,t.querySelector(".add-example").addEventListener("click",(()=>{const t=prompt("新しい例文を入力してください:");t&&(e.examples.push(t),v())})),t.querySelectorAll(".delete-example").forEach((t=>{t.addEventListener("click",(()=>{const n=Number(t.getAttribute("data-index"));e.examples.splice(n,1),v()}))})),t.querySelector(".save-changes").addEventListener("click",(()=>o(this,void 0,void 0,(function*(){const n=t.querySelector(".note-area"),o=t.querySelector(".priority-select");e.note=n.value,e.priority=Number(o.value),yield i.save(e),console.log("保存しました")})))),t.querySelector(".delete-key").addEventListener("click",(()=>o(this,void 0,void 0,(function*(){yield i.delete(e.key),u()})))),c.appendChild(t)}h()}d.addEventListener("click",(()=>{u({from:l.value?new Date(l.value):void 0,to:a.value?new Date(a.value):void 0,prioritySort:r.value})}));const f=document.getElementById("excludedDomainInput"),E=document.getElementById("addExcludedDomainButton"),g=document.getElementById("excludedDomainList");function D(){return o(this,void 0,void 0,(function*(){const e=yield i.getAllExcludedDomains();g.innerHTML="";for(const t of e){const e=document.createElement("li");e.textContent=t.domain;const n=document.createElement("button");n.textContent="削除",n.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){yield i.removeExcludedDomain(t.domain),D()})))),e.appendChild(n),g.appendChild(e)}}))}E.addEventListener("click",(()=>o(void 0,void 0,void 0,(function*(){const e=f.value.trim();e&&(yield i.addExcludedDomain(e),f.value="",D())})))),D(),u()}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}(115)})();